package main

import (
	"testing"
)

var example = `....#.....
.........#
..........
..#.......
.......#..
..........
.#..^.....
........#.
#.........
......#...`

func TestCalculateVisited(t *testing.T) {
	tests := []struct {
		name  string
		input string
		want  int
	}{
		{
			name:  "example",
			input: example,
			want:  41,
		},
		{
			name:  "actual",
			input: input,
			want:  5269,
		},
	}
	for _, tt := range tests {
		l := NewLab(tt.input)
		t.Run(tt.name, func(t *testing.T) {
			if got := l.CalculateVisited(); got != tt.want {
				t.Errorf("calculate = %v\n\nwant: %v, map: \n%v", got, tt.want, l.String())
			}
		})
	}
}

func TestCalculateObstacles(t *testing.T) {
	tests := []struct {
		name  string
		input string
		want  int
	}{
		{
			name:  "example",
			input: example,
			want:  6,
		},
		{
			name:  "actual",
			input: input,
			want:  1957,
		},
	}
	for _, tt := range tests {
		l := NewLab(tt.input)
		t.Run(tt.name, func(t *testing.T) {
			if got := l.CalculateWithObstacle(); got != tt.want {
				t.Errorf("calculate = %v\n\nwant: %v, map: \n%v", got, tt.want, l.String())
			}
		})
	}
}

var input = `................#......#...........#...........................#......#...........#........................................#......
.......................................................................................#........#............#.............#.....#
#.......................#...#..........#...........#........#.......................#............#................................
.............#...............................................#........#................................#....#......#..............
...#..................................#......................#....#....................................#.................#........
...................#.....#......#...........#............................#......................#.#........................#......
...........................#..#...........#.............................#.........#.##.............#..............................
.#.................#................#..........##.........##..............#...................................................#...
...............................#......................#........#.......................#.........#...........#....................
...................................#................#.............................................................................
..#...............##.......#................#.#......#...........#................................................................
....#.#.....#..............#........##........................##...........................................#...............#......
.....................#..........#.................................#.....................................#.........................
..............#.........................................##......#.......................#..............#.................#..#.....
...........#...#..........................................................#.......#.............................#................#
................................#.#...............#...............................#..............##...............................
.........................................................#............#......................................#.................#..
......#.#....#.................................#....###..................#......#.........#....#..................................
..............#...................................#..........#............#.......#...............................................
..............#......#...............#.............................................#.............................................#
....#.#..............#................#......................................................................#....................
........................................................#...........#..#.#.....................#....#.....#........#...#.......#..
..............#.......#................#............................#..#.......#.........#...........#...#...#....#....#.....#....
...#...............................................................................................#..#..#..........#.............
.......#.........#..###..................................##...............##..#.......................#..........#...........#...#
.......#.....................#.............#...........#...............................................#.................#........
..........#............................#..............................#......#..#.........#...............................#.......
.............................#...............#............#..............................................................#........
...........#...................#......#......................#.......................#...............#......#.....................
..#..............................................#.........................#.............#...#.#..................................
................#.............................#....................................#.....#...................#..#.....#...........
#............................#...#........................#................#....#.............................................#...
...............#.............#........#...................................................................#.......#....#..#.......
...........#......#.....#........................#.#..........................................#............#......................
.#.....................................................#...............#.........................#................#...........#...
.........................................#.............#......#.#....................................................#.........#..
................................#...#......................................................#..........................#..........#
.#.........................#..............#.#.....................................................................................
.........#..........#.............##.........#..#.................#........................#.....#.##....................#........
...................................................................................#...........................................#..
................#..........................................#...#...#.................................................#.........#..
..............................................#..............#..................#......#...#....#..#..............................
......#......#.................#.............#..................#...............#.............#..................#...............#
.................................#.......#......#.......#.............................................................#........#..
..................#......#...................................#.................#.......#..........................................
....................#.........#.........................#..........#..........#..................#................................
..........#...........#...............#.#..................................................................................#......
..................#..#....................................................#..........#......#................................#....
............#.................................................................................................#........#..........
.........#...............................................#.........##...........................#.................................
...#.........#........................................................#....................................#......................
........#......................#......#............#........#...............#.......................#.............................
.......#..............................................................................................#....................#......
.#.#..........#.......#.............##......................#..........................................................#..........
............#.#...........#............................................................#..........................................
............#..........................................................................#....................#...............#.....
.......................#.....#...#........................................#.......#.........#.........................#...........
....................#..............#......#.......................................................................................
......................#....................................................................#...............#...#............#.....
........#..........#....................#...#........#......#..........................#....#..................#..#...............
................#...........................................................................................................#.....
.#...............#..........................................................................................#......#..#.#.........
..............#................#...............#.........#.........#................................#.#...........................
...#................#..............#........................#...#.......................................#.#.......................
#.........................................#..#....................................................................#...............
.............#...........#.......#.#.....................................................................#.....#..................
.............#..............................................................................#.....................................
........................#........#....#........#.#.............................................^..........#.......................
...............................#.......................................................#.............##.......#.......#...........
#.#..............#..........................................#.......#..........................................#..................
...##...............................#........#.............##..................................................#..................
..#..#.................................................................#............#...#...#.....................................
....................#.#...#............#.......#.............#.......#..............#.............................................
..#..#.........#.............................................................................#......................#...#.........
....................................................#.........................#..#...#.#.#......#...............................#.
......#.....#.....................................................................#..............................................#
....................#........#..........................................................#.......#........................#........
................#.........................#...........................#...........................................#..............#
..#.......#..................................................#..................................#.................................
..........#.....................#...#.#...........#....................................#..........................................
.....................................#...........................................................#..........#...................#.
....#............................#.........................................#.........................#............................
......#............#...........#......#.#..................................#......................................................
..................#.......#.....#......#.................................................................#................#.......
...........#.....#........................................................#.............#.........................................
.................................#...........................#........#.........#............#.............................#.....#
..#........................#.................................#....................................................................
......................................................................................................#........#.#...#............
#............................#..........#.#.....................#.............................................................#...
.......#.......#................#..........#..........................#........#....#...#........................................#
....#.....#..........................................................#.........................#....................#..#.......#..
.......#.............#.................................#...................................................................#......
...............#.......................................#.#...............................#.#..........#...........................
....#......#...#.#.........................#...............#...........#.......#........................................#..#......
...................#.........................................#.....................................................#..#.....#...#.
....#......#.#.............................#..........##........#......................#.#.......................#....#...........
........#.........................#........#.#..........................##..............#....#....................................
.............#.....#..........#.....#.......#..##...#.....................#..................................#....................
....#....#...........................#...........#....................#.....#.......#....#.........#.....#....#...................
............#...#....................#..........#.......#......#............#.........................#............##.............
.....................#.................................................................####.......................................
...#...........................................................................#......#..............#....#.......#...............
....#...#...#.....................#.............#..............................#...................#...........#..................
............................#...........#........#.............#..................................................................
...#.....#......#.....................#...........................................#...........#........#..........................
.................#...........................#................................................................#..........#........
.....................#........#...#...................................................................................#......#....
.#...............................#...#....#.................#...#......#..........................................................
....................#..........#.........................................#....................#.........#.........................
.......#.............#............#................#..........#.#.#.....................#............#.....................#......
......................#.........................#.................#...........................#................#..................
...#....#..........................#.#..##.................#..#..........#..............................................#.........
...........#.........................................................................................#.............#..............
..............#.................##...........#..#.............................................#..............................#....
...............................................##.......#..#.....#........#...#.............#.....................#...............
........#...................#...........#...............................#............................................#........#...
...................................#.....#......................#...#.........##..#...................#.#.........................
............#...........##............#.......................#.....#.......#...................#.................................
..#..#..............................#.......#.........#.....................................#.............#..#.................#..
..................#..................#..........................##..................#...#.......#.........#..................#....
.........#.........#..............................................#...........................................................#...
......................#...........#..................................#............................#......#.....#..................
.....#....#......#..................#.....#..............#.............................................#.....#....................
..............##...........#........................................................................#........#.#..................
..........#...............................##.......#............#.#.........#.....................................#....#..........
.................................#..............#.............................#........................................#..........
....................#.................#..........#..............#.......................#...................................#.....
............#..............................#.............................#......#......#......................#...#...............
.#..........#...............#..................................................................#....#.............................
....#............................................#......#..................#.....#............#.........................#.........`
